<!DOCTYPE html>
<html>
  <head>
    <title>Plotly Line Chart Example</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="./shared_libs.js"></script>
    <script src="./api.js"></script>
    <script src="./linear_regression.chart.ui.js"></script>
    <script src="./cost_function_fixed_b.chart.ui.js"></script>
    <script src="./cost_function_fixed_w.chart.ui.js"></script>
    <script src="./cost_function_3d.chart.ui.js"></script>
    <script src="./linear_regression.application.js"></script>
    <style>
      .container {
        display: flex;
        justify-content: space-between;
      }

      #linear_regression {
        width: 100%;
        max-width: 700px;
        height: 400px;
      }

      #linear_regression_cost_function_fixed_b {
        width: 100%;
        max-width: 700px;
        height: 400px;
      }

      #linear_regression_cost_function_fixed_w {
        width: 100%;
        max-width: 700px;
        height: 400px;
      }

      #linear_regression_cost_function_3d {
        width: 100%;
        max-width: 700px;
        height: 800px;
      }
    </style>
  </head>

  <body>
    <div class="container">
      w_begin:
      <input
        type="number"
        id="w-begin-input"
        value="-2"
        placeholder="w_begin"
        step="0.25"
      />
      w_end:
      <input
        type="number"
        id="w-end-input"
        value="4"
        placeholder="w_end"
        step="0.25"
      />
      w_step:
      <input
        type="number"
        id="w-step-input"
        value="0.25"
        placeholder="w_step"
        step="0.25"
      />

      b_begin:
      <input
        type="number"
        id="b-begin-input"
        value="-2"
        placeholder="b_begin"
        step="0.25"
      />
      b_end:
      <input
        type="number"
        id="b-end-input"
        value="4"
        placeholder="b_end"
        step="0.25"
      />
      b_step:
      <input
        type="number"
        id="b-step-input"
        value="0.25"
        placeholder="b_step"
        step="0.25"
      />
    </div>
    <div class="container">
      <div id="linear_regression"></div>
      <div id="linear_regression_cost_function_fixed_w"></div>
      <div id="linear_regression_cost_function_fixed_b"></div>
    </div>
    <div class="container">
      w:
      <input type="number" id="w-input" value="1" placeholder="w" step="0.25" />
      b:
      <input type="number" id="b-input" value="0" placeholder="b" step="0.25" />
    </div>
    <div class="container">
      <div id="linear_regression_cost_function_3d"></div>
    </div>

    <script>
      // App layer: BEGIN
      const runApp = () => {
        const host = "http://localhost:3000";

        const w_begin = get_input_value("w-begin-input");
        const w_end = get_input_value("w-end-input");
        const w_step = get_input_value("w-step-input");

        const b_begin = get_input_value("b-begin-input");
        const b_end = get_input_value("b-end-input");
        const b_step = get_input_value("b-step-input");

        const w = get_input_value("w-input");
        const b = get_input_value("b-input");

        const config = {
          w,
          b,
          w_begin,
          w_end,
          w_step,
          b_begin,
          b_end,
          b_step,
          host,
        };
        linear_regression_app(config);
      };
      // App layer: END

      // Entry point: BEGIN
      function main() {
        document.getElementById("w-input").addEventListener("input", runApp);
        document.getElementById("b-input").addEventListener("input", runApp);
        document.getElementById("w-begin-input").addEventListener("input", runApp);
        document.getElementById("w-end-input").addEventListener("input", runApp);
        document.getElementById("w-step-input").addEventListener("input", runApp);
        document.getElementById("b-begin-input").addEventListener("input", runApp);
        document.getElementById("b-end-input").addEventListener("input", runApp);
        document.getElementById("b-step-input").addEventListener("input", runApp);

        runApp();
      }

      main();
      // Entry point: END
    </script>
  </body>
</html>
